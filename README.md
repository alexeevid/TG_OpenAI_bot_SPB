# Telegram OpenAI Bot ‚Äî —Å–±–æ—Ä–∫–∞ —Å –ë–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π (–∫–æ–Ω—Ç—Ä–∞–∫—Ç + –∞–¥–∞–ø—Ç–µ—Ä—ã)

## –ß—Ç–æ –Ω–æ–≤–æ–≥–æ
- **–°—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ë–ó**: `bot/knowledge_base/interfaces.py`
- **–ê–¥–∞–ø—Ç–µ—Ä—ã –∫ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: `bot/knowledge_base/adapters.py`
- –ë–æ—Ç –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏–º—ë–Ω –º–µ—Ç–æ–¥–æ–≤ –≤ –≤–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–ó.
- –ö–æ–º–∞–Ω–¥–∞ `/kb`:
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ –∫–Ω–æ–ø–∫–µ **—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤**,
  - –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –≥–∞–ª–æ—á–∫–∞–º–∏,
  - `–ì–æ—Ç–æ–≤–æ` –∏ `–û—á–∏—Å—Ç–∏—Ç—å`.
- KB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–≤–∫–ª/–≤—ã–∫–ª –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É–±—Ä–∞–Ω).

## –ö–æ–º–∞–Ω–¥—ã
- `/start`, `/help`
- `/reset` ‚Äî –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
- `/stats` ‚Äî —Ç–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å/—Å—Ç–∏–ª—å, —Å—Ç–∞—Ç—É—Å KB, –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `/kb` ‚Äî –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:
  - `üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (–æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –Ω–∞–ø—Ä. –Ø.–î–∏—Å–∫)
  - –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî —Å—Ç–∞–≤—å—Ç–µ/—Å–Ω–∏–º–∞–π—Ç–µ –≥–∞–ª–æ—á–∫–∏
  - `üßπ –û—á–∏—Å—Ç–∏—Ç—å`, `‚úÖ –ì–æ—Ç–æ–≤–æ`
- `/model` ‚Äî –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ OpenAI
- `/mode` ‚Äî –≤—ã–±–æ—Ä —Å—Ç–∏–ª—è (Pro, Expert, User, CEO)
- `/dialogs` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ (–æ—Ç–∫—Ä—ã—Ç—å/—É–¥–∞–ª–∏—Ç—å, —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π)
- `/img` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `/web` ‚Äî –≤–µ–±-–ø–æ–∏—Å–∫ —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π: –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í –±–æ—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∫–æ–Ω—Ç—Ä–∞–∫—Ç**: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `IKnowledgeBaseIndexer`, `IKnowledgeBaseRetriever`, `IContextBuilder`.
- –í–∞—à–∏ –∫–ª–∞—Å—Å—ã `KnowledgeBaseIndexer`, `KnowledgeBaseRetriever`, `ContextManager` –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **–∞–¥–∞–ø—Ç–µ—Ä—ã**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç:
  - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (—Å `settings` –∏–ª–∏ –±–µ–∑),
  - –∏–º–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–≤ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤,
  - —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ `sync()` (–∫–æ—Ä—Ç–µ–∂/—Å–ª–æ–≤–∞—Ä—å),
  - —Ñ–æ—Ä–º–∞—Ç –≤—ã–¥–∞—á–∏ —á–∞–Ω–∫–æ–≤.

> –ï—Å–ª–∏ –º–æ–¥—É–ª–µ–π –ë–ó –Ω–µ—Ç, –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: ¬´–ú–æ–¥—É–ª—å –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ —ç—Ç–æ–π —Å–±–æ—Ä–∫–µ.¬ª

## ENV –∏ –¥–æ—Å—Ç—É–ø—ã
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `OPENAI_API_KEY` ‚Äî –∫–ª—é—á OpenAI
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `ADMIN_USER_IDS` / `ADMIN_SET` ‚Äî —Å–ø–∏—Å–æ–∫ Telegram ID –∞–¥–º–∏–Ω–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ JSON)
- (–≤–∞—à–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ø.–î–∏—Å–∫–∞/–ë–î/–∏ —Ç.–¥.) ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ó–∞–ø—É—Å–∫
–û–±—ã—á–Ω—ã–π polling:
```bash
python -m bot.main
