# Модульная сборка (рефактор)

- Весь старый функционал сохранён в `bot/legacy/telegram_legacy.py`.
- Новый вход — `bot/telegram_bot.py` (тонкий, только регистрация).
- Точка запуска: `python -m bot.main`.

## Alembic миграции
Мы добавили миграцию `002_add_voice_fields.py`, **связанную** с вашей `001_initial` через:
```
down_revision = '001_initial'
```
Если ранее база была «помечена» нестандартным revision, перед запуском убедитесь, что:
- В таблице `alembic_version` хранится `001_initial` для чистой базы, либо
- Выполните:
  ```
  alembic stamp 001_initial
  alembic upgrade head
  ```

## Что изменилось по коду
- Исправлены строковые литералы с переносом строки в `reply_photo(caption=...)`.
- Убраны экранированные кавычки `\"` внутри Python-кода.

